<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
    <f:metadata>
        <f:event type="preRenderView" listener="#{resultController.initialize}"/>
    </f:metadata>
  <h:head>
        <title>Spherical Particles Report</title>
      <h:outputStylesheet library="css" name="style.css"  />
        <link rel="shortcut icon" type="image/x-icon" href="#{resource['images/favicon.ico']}"/>
  </h:head>

    <ui:insert name="header" >
        <ui:include src="header.html">
            <ui:param name = "Title" value = "Spherical Particles Report" />
        </ui:include>
    </ui:insert>

    <h:body>
        <p:button class="back_button" value="Back" outcome="spherical" />
        <h:form enctype="multipart/form-data">
            <p:panel id="basic" header="Image Preview" style="margin-bottom:20px">
                <h:panelGrid columns="2" cellpadding="10">
                    <p:graphicImage value="#{resultController.imgPreview}" cache="false" onmouseup="#{resultController.imgPreview}"/>
                </h:panelGrid>
            </p:panel>
            <p:dataTable class="dataTable" id="imageResults" var="imageResult" value="#{resultController.particleResults}"
                         rows="25"
                         paginator="true"
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         rowsPerPageTemplate="10,25,50">
                <f:facet name="header">
                    List of Properties
                    <p:commandButton id="toggler" type="button" value="Columns" style="float:right" icon="ui-icon-calculator" />
                    <p:columnToggler datasource="imageResults" trigger="toggler" />
                </f:facet>
                <p:column headerText="id" width="200">
                    <h:outputText value="#{imageResult.id}"/>
                </p:column>
                <p:column headerText="Min Feret" rendered="#{resultController.isFeretSelected}" width="200">
                    <h:outputText value="#{imageResult.min_feret}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Feret Angle" rendered="#{resultController.isFeretSelected}" width="200">
                    <h:outputText value="#{imageResult.feret_angle}">
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
               <!-- <p:column headerText="Feret X" rendered="#{resultController.isFeretSelected}" width="200">
                    <h:outputText value="#{imageResult.feret_x}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Feret Y" rendered="#{resultController.isFeretSelected}" width="200">
                    <h:outputText value="#{imageResult.feret_y}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>-->
                <p:column headerText="Area" rendered="#{resultController.isAreaSelected}" width="200">
                    <h:outputText value="#{imageResult.area}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Porosity" rendered="#{resultController.isPorositySelected}" width="200">
                    <h:outputText value="#{imageResult.area_fraction}">
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Perimeter" rendered="#{resultController.isPerimeterSelected}" width="200">
                    <h:outputText value="#{imageResult.perimeter}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Circularity" rendered="#{resultController.isShapeDescriptorsSelected}" width="200">
                    <h:outputText value="#{imageResult.circularity}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Aspect Ratio" rendered="#{resultController.isShapeDescriptorsSelected}" width="200">
                    <h:outputText value="#{imageResult.aspect_ratio}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Roundness" rendered="#{resultController.isShapeDescriptorsSelected}" width="200">
                    <h:outputText value="#{imageResult.roundness}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Solidity" rendered="#{resultController.isShapeDescriptorsSelected}" width="200">
                    <h:outputText value="#{imageResult.solidity}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Grey deviation" rendered="#{resultController.isStandardDeviationSelected}" width="200">
                    <h:outputText value="#{imageResult.std_dev}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <!--Volume related Parameters-->
                <p:column headerText="Volume" rendered="#{resultController.isVolumeSelected}" width="200">
                    <h:outputText value="#{imageResult.volume}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Sphericity" rendered="#{resultController.isSphericitySelected}" width="200">
                    <h:outputText value="#{imageResult.sphericity}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Surface Diameter" rendered="#{resultController.isSurfaceDiameterSelected}" width="200">
                    <h:outputText value="#{imageResult.surfaceDiameter}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Volume to Surface" rendered="#{resultController.isVolumeToSurfaceSelected}" width="200">
                    <h:outputText value="#{imageResult.volumeToSurface}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <!-- Fit Ellipse Related Parameters -->
                <p:column headerText="Angle" rendered="#{resultController.isFitEllipseSelected}" width="200">
                    <h:outputText value="#{imageResult.angle}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Minor" rendered="#{resultController.isFitEllipseSelected}" width="200">
                    <h:outputText value="#{imageResult.minor}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Major" rendered="#{resultController.isFitEllipseSelected}" width="200">
                    <h:outputText value="#{imageResult.major}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Skeweness" rendered="#{resultController.isSkewenessSelected}" width="200">
                    <h:outputText value="#{imageResult.skewness}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Integrated Density" rendered="#{resultController.isIntegratedDensitySelected}" width="200">
                    <h:outputText value="#{imageResult.integrated_density}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Kurtosis" rendered="#{resultController.isKurtosisSelected}" width="200">
                    <h:outputText value="#{imageResult.kurtosis}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Min Grey Value" rendered="#{resultController.isMinMaxSelected}" width="200">
                    <h:outputText value="#{imageResult.min_grey_value}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Max Grey Value" rendered="#{resultController.isMinMaxSelected}" width="200">
                    <h:outputText value="#{imageResult.max_grey_value}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
             <!--   <p:column headerText="Center Of Mass X" rendered="#{resultController.isCenterOfMassSelected}" width="200">
                    <h:outputText value="#{imageResult.x_center_of_mass}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Center Of Mass Y" rendered="#{resultController.isCenterOfMassSelected}" width="200">
                    <h:outputText value="#{imageResult.y_center_of_mass}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Centroid X" rendered="#{resultController.isCentroidSelected}" width="200">
                    <h:outputText value="#{imageResult.x_centroid}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Centroid Y" rendered="#{resultController.isCentroidSelected}" width="200">
                    <h:outputText value="#{imageResult.y_centroid}">
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>-->
                <p:column headerText="Modal Grey Value" rendered="#{resultController.isModalGrayValueSelected}" width="200">
                    <h:outputText value="#{imageResult.modal_grey_value}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
                <p:column headerText="Mean Grey Value" rendered="#{resultController.isMeanGrayValueSelected}" width="200">
                    <h:outputText value="#{imageResult.mean_grey_value}" >
                        <f:convertNumber minFractionDigits="3" />
                    </h:outputText>
                </p:column>
            </p:dataTable>
            <div class="dataTableExports">
                <h:commandLink style="float:right">
                    <p:graphicImage name="xml.png" width="50px"/>
                    <p:dataExporter type="xml" target="imageResults" fileName="sphericalReport" />
                </h:commandLink>
                <h:commandLink style="float:right">
                    <p:graphicImage name="csv.png" width="50px"/>
                    <p:dataExporter type="csv" target="imageResults" fileName="sphericalReport" />
                </h:commandLink>
                <h:commandLink style="float:right">
                    <p:graphicImage name="pdf.png" width="50px"/>
                    <p:dataExporter type="pdf" target="imageResults" fileName="sphericalReport" preProcessor="#{resultController.preProcessPDF}"/>
                </h:commandLink>
                <h:commandLink style="float:right">
                    <p:graphicImage name="excel.png" width="50px"/>
                    <p:dataExporter type="xls" target="imageResults" fileName="sphericalReport" />
                </h:commandLink>
                <span style="font-size:2vw; float:right"  >Download Spherical Descriptors: </span>
            </div>

        </h:form>
        <div class="p-col-12">
            <ui:insert name="footer" >
                <ui:include src="spherical_footer.xhtml" />
            </ui:insert>
        </div>
    </h:body>
</html>
